<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ğŸ§± Tellrawã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆJavaãƒ»çµ±åˆç‰ˆå¯¾å¿œï¼‰</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%235a5'/><text x='50' y='75' font-size='70' text-anchor='middle' fill='white' font-family='M PLUS Rounded 1c'>T</text></svg>">
<style>
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500&display=swap');
body {
  background: #1b1b1b;
  color: #ddd;
  font-family: "M PLUS Rounded 1c", sans-serif;
  display: flex;
  justify-content: center;
  padding: 20px;
}
.container {
  background: #2a2a2a;
  padding: 20px;
  border-radius: 15px;
  width: 800px;
  border: 3px solid #5a5;
}
h1 { color: #6f6; }
input, select, textarea, button {
  font-family: inherit;
  border: 1px solid #5a5;
  border-radius: 5px;
  background: #1a1a1a;
  color: #eee;
  margin: 5px;
  padding: 6px;
}
button {
  background: #333;
  color: #5a5;
  cursor: pointer;
  transition: 0.2s;
}
button:hover {
  background: #5a5;
  color: #111;
}
.text-entry {
  background: #333;
  padding: 10px;
  border-radius: 10px;
  margin: 8px 0;
}
#preview {
  background: #111;
  border-radius: 8px;
  border: 2px solid #5a5;
  padding: 10px;
  min-height: 50px;
  font-family: monospace;
}
#preview span {
  padding: 2px 5px;
  border-radius: 3px;
  position: relative;
}
.hoverPopup {
  display: none;
  position: absolute;
  top: -120%;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: #fff;
  border: 2px solid #5a5;
  border-radius: 8px;
  padding: 4px 8px;
  white-space: pre-line;
  z-index: 10;
}
#preview span:hover .hoverPopup {
  display: block;
}
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ§± Tellrawã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆJavaãƒ»çµ±åˆç‰ˆå¯¾å¿œï¼‰</h1>

  <label>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</label>
  <select id="version">
    <option value="bedrock">çµ±åˆç‰ˆ</option>
    <option value="java">Javaç‰ˆ</option>
  </select><br>

  <label><input type="checkbox" id="showPlayer" checked> ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã‚’è¡¨ç¤º</label><br>
  <div id="playerSettings">
    <label>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åï¼š</label>
    <input type="text" id="playerName" value="kinokenn">
    <label>è‰²ï¼š</label>
    <select id="playerColor">
      <option value="">è‰²ãªã—</option>
      <option value="black">é»’</option>
      <option value="white">ç™½</option>
      <option value="yellow">é»„</option>
      <option value="gold">é‡‘</option>
      <option value="aqua">æ°´è‰²</option>
      <option value="green">ç·‘</option>
      <option value="red">èµ¤</option>
      <option value="light_purple">ç´«</option>
      <option value="blue">é’</option>
      <option value="gray">ç°</option>
      <option value="dark_gray">æš—ç°</option>
      <option value="dark_red">æš—èµ¤</option>
    </select>
  </div>

  <div id="entries"></div>
  <button id="addText">ï¼‹ ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ </button>
  <button id="generate">ğŸ“œ ã‚³ãƒãƒ³ãƒ‰ç”Ÿæˆ</button>
  <button id="copyBtn">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>

  <h3>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
  <div id="preview"></div>

  <h3>ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰</h3>
  <textarea id="output" rows="10" readonly></textarea>
</div>

<script>
const entriesDiv = document.getElementById("entries");
document.getElementById("addText").onclick = addTextEntry;

function addTextEntry() {
  const div = document.createElement("div");
  div.className = "text-entry";
  div.innerHTML = `
    <label>ãƒ†ã‚­ã‚¹ãƒˆ:</label> <input type="text" class="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">
    <label>è‰²:</label>
    <select class="color">
      <option value="">è‰²ãªã—</option>
      <option value="black">é»’</option>
      <option value="white">ç™½</option>
      <option value="yellow">é»„</option>
      <option value="gold">é‡‘</option>
      <option value="aqua">æ°´è‰²</option>
      <option value="green">ç·‘</option>
      <option value="red">èµ¤</option>
      <option value="light_purple">ç´«</option>
      <option value="blue">é’</option>
      <option value="gray">ç°</option>
      <option value="dark_gray">æš—ç°</option>
      <option value="dark_red">æš—èµ¤</option>
    </select>
    <label>ã‚¯ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:</label>
    <select class="click">
      <option value="">ãªã—</option>
      <option value="run_command">ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ</option>
      <option value="open_url">URLã‚’é–‹ã</option>
    </select>
    <input type="text" class="clickValue" placeholder="ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å€¤">
    <label>ãƒ›ãƒãƒ¼èª¬æ˜:</label>
    <input type="text" class="hover" placeholder="ãƒ›ãƒãƒ¼æ™‚ã®ãƒ†ã‚­ã‚¹ãƒˆ">
    <button onclick="this.parentNode.remove()">å‰Šé™¤</button>
  `;
  entriesDiv.appendChild(div);
}

document.getElementById("generate").onclick = () => {
  const showPlayer = document.getElementById("showPlayer").checked;
  const playerName = document.getElementById("playerName").value || "Player";
  const playerColor = document.getElementById("playerColor").value;
  const version = document.getElementById("version").value;
  const elements = [];
  const preview = document.getElementById("preview");
  const output = document.getElementById("output");
  preview.innerHTML = "";

  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åè¿½åŠ 
  if (showPlayer) {
    const playerObj = { text: `<${playerName}> ` };
    if (playerColor) playerObj.color = playerColor;
    elements.push(playerObj);
  }

  // å„ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†
  for (const div of document.querySelectorAll(".text-entry")) {
    const text = div.querySelector(".text").value;
    const color = div.querySelector(".color").value;
    const click = div.querySelector(".click").value;
    const clickValue = div.querySelector(".clickValue").value;
    const hover = div.querySelector(".hover").value;
    if (!text) continue;

    const obj = { text };
    if (color) obj.color = color;
    if (click) obj.clickEvent = { action: click, value: clickValue };
    if (hover) obj.hoverEvent = { action: "show_text", value: hover };
    elements.push(obj);
  }

  // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  preview.innerHTML = "";
  for (const e of elements) {
    const span = document.createElement("span");
    span.textContent = e.text;
    if (e.color) span.style.color = e.color;
    if (e.clickEvent) {
      span.style.textDecoration = "underline";
      span.style.cursor = "pointer";
      if (e.clickEvent.action === "open_url") {
        span.onclick = () => window.open(e.clickEvent.value, "_blank");
      } else {
        span.onclick = () => alert("ã‚³ãƒãƒ³ãƒ‰: " + e.clickEvent.value);
      }
    }
    if (e.hoverEvent) {
      const hoverDiv = document.createElement("div");
      hoverDiv.className = "hoverPopup";
      hoverDiv.textContent = e.hoverEvent.value;
      span.appendChild(hoverDiv);
    }
    preview.appendChild(span);
  }

  // ã‚³ãƒãƒ³ãƒ‰ç”Ÿæˆ
  let cmd;
  if (version === "bedrock") {
    cmd = `/tellraw @a {"rawtext":${JSON.stringify(elements, null, 2)}}`;
  } else {
    cmd = `/tellraw @a ${JSON.stringify(elements, null, 2)}`;
  }
  output.value = cmd;
};

// ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
document.getElementById("copyBtn").onclick = () => {
  const out = document.getElementById("output");
  out.select();
  navigator.clipboard.writeText(out.value);
  alert("ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
};

// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åON/OFFåˆ‡æ›¿
document.getElementById("showPlayer").addEventListener("change", (e) => {
  document.getElementById("playerSettings").style.display = e.target.checked ? "block" : "none";
});

// åˆæœŸè¡Œ
addTextEntry();
</script>
</body>
</html>
